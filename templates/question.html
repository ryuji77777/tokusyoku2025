<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>質問</title>
    <style>
        .options {
            display: flex;
            gap: 15px;  /* 選択肢を横並びに */
        }
        .question-block {
            margin-bottom: 20px;
        }
        span.info-icon {
            cursor: pointer;
            margin-left: 5px;
            color: #007BFF; /* 青色で目立たせる */
        }
    </style>
</head>
<body>
    <h2>{{ question }}</h2>

    <form action="{{ url_for('question', node_id=node_id) }}" method="post">
        <input type="hidden" name="node_id" value="{{ node_id }}">
        <input type="hidden" name="qtype" value="{{ qtype }}">

        {% if qtype == 'single' %}
            {% for label, data in choices.items() %}
                <label>
                    <input type="radio" name="answer" value="{{ label }}" required>
                    {{ label }}
                </label><br>
            {% endfor %}

        {% elif qtype == 'multiple' %}
            {% for label, data in choices.items() %}
                <label>
                    <input type="checkbox" name="answer" value="{{ label }}">
                    {{ label }}
                    {% if data.tooltip %}
                        <span class="info-icon" onclick="alert('{{ data.tooltip }}')">ℹ️</span>
                    {% endif %}
                </label><br>
            {% endfor %}

        {% elif qtype == 'multi_single' %}
            {% for sub_id, subq in subquestions.items() %}
                <div class="question-block">
                    <p>{{ subq.question }}</p>
                    <div class="options">
                        {% for label, data in subq.choices.items() %}
                            <label>
                                <input type="radio" name="{{ sub_id }}" value="{{ label }}" required>
                                {{ label }}
                            </label>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}

        {% else %}
            <p>エラー(未知の質問タイプ)</p>
        {% endif %}

        <br>
        <button type="submit">次に進む</button>
    </form>

    <form action="{{ url_for('index') }}" method="get" style="display:inline-block;">
        <br>
        <button type="submit">最初に戻る</button>
    </form>
</body>
</html>
